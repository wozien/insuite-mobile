(function(){function i(){}var t=this,e=t._,r=Array.prototype,a=Object.prototype,n=Function.prototype,o=r.push,s=r.slice,l=a.toString,u=a.hasOwnProperty,c=Array.isArray,f=Object.keys,_=n.bind,h=Object.create,d=function(t){return t instanceof d?t:this instanceof d?void(this._wrapped=t):new d(t)};"undefined"!=typeof exports?(exports="undefined"!=typeof module&&module.exports?module.exports=d:exports)._=d:t._=d,d.VERSION="1.8.2";var p=function(o,i,t){if(void 0===i)return o;switch(null==t?3:t){case 1:return function(t){return o.call(i,t)};case 2:return function(t,e){return o.call(i,t,e)};case 3:return function(t,e,n){return o.call(i,t,e,n)};case 4:return function(t,e,n,r){return o.call(i,t,e,n,r)}}return function(){return o.apply(i,arguments)}},m=function(t,e,n){return null==t?d.identity:d.isFunction(t)?p(t,e,n):d.isObject(t)?d.matcher(t):d.property(t)};d.iteratee=function(t,e){return m(t,e,1/0)};var y=function(u,c){return function(t){var e=arguments.length;if(e<2||null==t)return t;for(var n=1;n<e;n++)for(var r=arguments[n],o=u(r),i=o.length,a=0;a<i;a++){var s=o[a];c&&void 0!==t[s]||(t[s]=r[s])}return t}},v=Math.pow(2,53)-1,g=function(t){t=t&&t.length;return"number"==typeof t&&0<=t&&t<=v};function w(s){return function(t,e,n,r){e=p(e,r,4);var o=!g(t)&&d.keys(t),i=(o||t).length,a=0<s?0:i-1;return arguments.length<3&&(n=t[o?o[a]:a],a+=s),function(t,e,n,r,o,i){for(;0<=o&&o<i;o+=s){var a=r?r[o]:o;n=e(n,t[a],a,t)}return n}(t,e,n,o,a,i)}}d.each=d.forEach=function(t,e,n){if(e=p(e,n),g(t))for(o=0,i=t.length;o<i;o++)e(t[o],o,t);else for(var r=d.keys(t),o=0,i=r.length;o<i;o++)e(t[r[o]],r[o],t);return t},d.map=d.collect=function(t,e,n){e=m(e,n);for(var r=!g(t)&&d.keys(t),o=(r||t).length,i=Array(o),a=0;a<o;a++){var s=r?r[a]:a;i[a]=e(t[s],s,t)}return i},d.reduce=d.foldl=d.inject=w(1),d.reduceRight=d.foldr=w(-1),d.find=d.detect=function(t,e,n){n=g(t)?d.findIndex(t,e,n):d.findKey(t,e,n);if(void 0!==n&&-1!==n)return t[n]},d.filter=d.select=function(t,r,e){var o=[];return r=m(r,e),d.each(t,function(t,e,n){r(t,e,n)&&o.push(t)}),o},d.reject=function(t,e,n){return d.filter(t,d.negate(m(e)),n)},d.every=d.all=function(t,e,n){e=m(e,n);for(var r=!g(t)&&d.keys(t),o=(r||t).length,i=0;i<o;i++){var a=r?r[i]:i;if(!e(t[a],a,t))return!1}return!0},d.some=d.any=function(t,e,n){e=m(e,n);for(var r=!g(t)&&d.keys(t),o=(r||t).length,i=0;i<o;i++){var a=r?r[i]:i;if(e(t[a],a,t))return!0}return!1},d.contains=d.includes=d.include=function(t,e,n){return g(t)||(t=d.values(t)),0<=d.indexOf(t,e,"number"==typeof n&&n)},d.invoke=function(t,n){var r=s.call(arguments,2),o=d.isFunction(n);return d.map(t,function(t){var e=o?n:t[n];return null==e?e:e.apply(t,r)})},d.pluck=function(t,e){return d.map(t,d.property(e))},d.where=function(t,e){return d.filter(t,d.matcher(e))},d.findWhere=function(t,e){return d.find(t,d.matcher(e))},d.max=function(t,r,e){var n,o,i=-1/0,a=-1/0;if(null==r&&null!=t)for(var s=0,u=(t=g(t)?t:d.values(t)).length;s<u;s++)n=t[s],i<n&&(i=n);else r=m(r,e),d.each(t,function(t,e,n){o=r(t,e,n),(a<o||o===-1/0&&i===-1/0)&&(i=t,a=o)});return i},d.min=function(t,r,e){var n,o,i=1/0,a=1/0;if(null==r&&null!=t)for(var s=0,u=(t=g(t)?t:d.values(t)).length;s<u;s++)(n=t[s])<i&&(i=n);else r=m(r,e),d.each(t,function(t,e,n){((o=r(t,e,n))<a||o===1/0&&i===1/0)&&(i=t,a=o)});return i},d.shuffle=function(t){for(var e,n=g(t)?t:d.values(t),r=n.length,o=Array(r),i=0;i<r;i++)(e=d.random(0,i))!==i&&(o[i]=o[e]),o[e]=n[i];return o},d.sample=function(t,e,n){return null==e||n?(t=!g(t)?d.values(t):t)[d.random(t.length-1)]:d.shuffle(t).slice(0,Math.max(0,e))},d.sortBy=function(t,r,e){return r=m(r,e),d.pluck(d.map(t,function(t,e,n){return{value:t,index:e,criteria:r(t,e,n)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(r<n||void 0===n)return 1;if(n<r||void 0===r)return-1}return t.index-e.index}),"value")};n=function(i){return function(n,r,t){var o={};return r=m(r,t),d.each(n,function(t,e){e=r(t,e,n);i(o,t,e)}),o}};d.groupBy=n(function(t,e,n){d.has(t,n)?t[n].push(e):t[n]=[e]}),d.indexBy=n(function(t,e,n){t[n]=e}),d.countBy=n(function(t,e,n){d.has(t,n)?t[n]++:t[n]=1}),d.toArray=function(t){return t?d.isArray(t)?s.call(t):g(t)?d.map(t,d.identity):d.values(t):[]},d.size=function(t){return null==t?0:(g(t)?t:d.keys(t)).length},d.partition=function(t,r,e){r=m(r,e);var o=[],i=[];return d.each(t,function(t,e,n){(r(t,e,n)?o:i).push(t)}),[o,i]},d.first=d.head=d.take=function(t,e,n){if(null!=t)return null==e||n?t[0]:d.initial(t,t.length-e)},d.initial=function(t,e,n){return s.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},d.last=function(t,e,n){if(null!=t)return null==e||n?t[t.length-1]:d.rest(t,Math.max(0,t.length-e))},d.rest=d.tail=d.drop=function(t,e,n){return s.call(t,null==e||n?1:e)},d.compact=function(t){return d.filter(t,d.identity)};var P=function(t,e,n,r){for(var o=[],i=0,a=r||0,s=t&&t.length;a<s;a++){var u=t[a];if(g(u)&&(d.isArray(u)||d.isArguments(u))){var c=0,l=(u=!e?P(u,e,n):u).length;for(o.length+=l;c<l;)o[i++]=u[c++]}else n||(o[i++]=u)}return o};function N(i){return function(t,e,n){e=m(e,n);for(var r=null!=t&&t.length,o=0<i?0:r-1;0<=o&&o<r;o+=i)if(e(t[o],o,t))return o;return-1}}d.flatten=function(t,e){return P(t,e,!1)},d.without=function(t){return d.difference(t,s.call(arguments,1))},d.uniq=d.unique=function(t,e,n,r){if(null==t)return[];d.isBoolean(e)||(r=n,n=e,e=!1),null!=n&&(n=m(n,r));for(var o=[],i=[],a=0,s=t.length;a<s;a++){var u=t[a],c=n?n(u,a,t):u;e?(a&&i===c||o.push(u),i=c):n?d.contains(i,c)||(i.push(c),o.push(u)):d.contains(o,u)||o.push(u)}return o},d.union=function(){return d.uniq(P(arguments,!0,!0))},d.intersection=function(t){if(null==t)return[];for(var e=[],n=arguments.length,r=0,o=t.length;r<o;r++){var i=t[r];if(!d.contains(e,i)){for(var a=1;a<n&&d.contains(arguments[a],i);a++);a===n&&e.push(i)}}return e},d.difference=function(t){var e=P(arguments,!0,!0,1);return d.filter(t,function(t){return!d.contains(e,t)})},d.zip=function(){return d.unzip(arguments)},d.unzip=function(t){for(var e=t&&d.max(t,"length").length||0,n=Array(e),r=0;r<e;r++)n[r]=d.pluck(t,r);return n},d.object=function(t,e){for(var n={},r=0,o=t&&t.length;r<o;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n},d.indexOf=function(t,e,n){var r=0,o=t&&t.length;if("number"==typeof n)r=n<0?Math.max(0,o+n):n;else if(n&&o)return t[r=d.sortedIndex(t,e)]===e?r:-1;if(e!=e)return d.findIndex(s.call(t,r),d.isNaN);for(;r<o;r++)if(t[r]===e)return r;return-1},d.lastIndexOf=function(t,e,n){var r=t?t.length:0;if("number"==typeof n&&(r=n<0?r+n+1:Math.min(r,n+1)),e!=e)return d.findLastIndex(s.call(t,0,r),d.isNaN);for(;0<=--r;)if(t[r]===e)return r;return-1},d.findIndex=N(1),d.findLastIndex=N(-1),d.sortedIndex=function(t,e,n,r){for(var o=(n=m(n,r,1))(e),i=0,a=t.length;i<a;){var s=Math.floor((i+a)/2);n(t[s])<o?i=s+1:a=s}return i},d.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=n||1;for(var r=Math.max(Math.ceil((e-t)/n),0),o=Array(r),i=0;i<r;i++,t+=n)o[i]=t;return o};function Y(t,e,n,r,o){return r instanceof e?(n=function(t){if(!d.isObject(t))return{};if(h)return h(t);i.prototype=t;t=new i;return i.prototype=null,t}(t.prototype),o=t.apply(n,o),d.isObject(o)?o:n):t.apply(n,o)}d.bind=function(t,e){if(_&&t.bind===_)return _.apply(t,s.call(arguments,1));if(!d.isFunction(t))throw new TypeError("Bind must be called on a function");var n=s.call(arguments,2),r=function(){return Y(t,r,e,this,n.concat(s.call(arguments)))};return r},d.partial=function(o){var i=s.call(arguments,1),a=function(){for(var t=0,e=i.length,n=Array(e),r=0;r<e;r++)n[r]=i[r]===d?arguments[t++]:i[r];for(;t<arguments.length;)n.push(arguments[t++]);return Y(o,a,this,this,n)};return a},d.bindAll=function(t){var e,n,r=arguments.length;if(r<=1)throw new Error("bindAll must be passed function names");for(e=1;e<r;e++)t[n=arguments[e]]=d.bind(t[n],t);return t},d.memoize=function(r,o){var i=function(t){var e=i.cache,n=""+(o?o.apply(this,arguments):t);return d.has(e,n)||(e[n]=r.apply(this,arguments)),e[n]};return i.cache={},i},d.delay=function(t,e){var n=s.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},d.defer=d.partial(d.delay,d,1),d.throttle=function(n,r,o){var i,a,s,u=null,c=0;o=o||{};function l(){c=!1===o.leading?0:d.now(),u=null,s=n.apply(i,a),u||(i=a=null)}return function(){var t=d.now();c||!1!==o.leading||(c=t);var e=r-(t-c);return i=this,a=arguments,e<=0||r<e?(u&&(clearTimeout(u),u=null),c=t,s=n.apply(i,a),u||(i=a=null)):u||!1===o.trailing||(u=setTimeout(l,e)),s}},d.debounce=function(e,n,r){var o,i,a,s,u,c=function(){var t=d.now()-s;t<n&&0<=t?o=setTimeout(c,n-t):(o=null,r||(u=e.apply(a,i),o||(a=i=null)))};return function(){a=this,i=arguments,s=d.now();var t=r&&!o;return o=o||setTimeout(c,n),t&&(u=e.apply(a,i),a=i=null),u}},d.wrap=function(t,e){return d.partial(e,t)},d.negate=function(t){return function(){return!t.apply(this,arguments)}},d.compose=function(){var n=arguments,r=n.length-1;return function(){for(var t=r,e=n[r].apply(this,arguments);t--;)e=n[t].call(this,e);return e}},d.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},d.before=function(t,e){var n;return function(){return 0<--t&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},d.once=d.partial(d.before,2);var b=!{toString:null}.propertyIsEnumerable("toString"),O=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function S(t,e){var n=O.length,r=t.constructor,o=d.isFunction(r)&&r.prototype||a,i="constructor";for(d.has(t,i)&&!d.contains(e,i)&&e.push(i);n--;)(i=O[n])in t&&t[i]!==o[i]&&!d.contains(e,i)&&e.push(i)}d.keys=function(t){if(!d.isObject(t))return[];if(f)return f(t);var e,n=[];for(e in t)d.has(t,e)&&n.push(e);return b&&S(t,n),n},d.allKeys=function(t){if(!d.isObject(t))return[];var e,n=[];for(e in t)n.push(e);return b&&S(t,n),n},d.values=function(t){for(var e=d.keys(t),n=e.length,r=Array(n),o=0;o<n;o++)r[o]=t[e[o]];return r},d.mapObject=function(t,e,n){e=m(e,n);for(var r,o=d.keys(t),i=o.length,a={},s=0;s<i;s++)a[r=o[s]]=e(t[r],r,t);return a},d.pairs=function(t){for(var e=d.keys(t),n=e.length,r=Array(n),o=0;o<n;o++)r[o]=[e[o],t[e[o]]];return r},d.invert=function(t){for(var e={},n=d.keys(t),r=0,o=n.length;r<o;r++)e[t[n[r]]]=n[r];return e},d.functions=d.methods=function(t){var e,n=[];for(e in t)d.isFunction(t[e])&&n.push(e);return n.sort()},d.extend=y(d.allKeys),d.extendOwn=d.assign=y(d.keys),d.findKey=function(t,e,n){e=m(e,n);for(var r,o=d.keys(t),i=0,a=o.length;i<a;i++)if(e(t[r=o[i]],r,t))return r},d.pick=function(t,e,n){var r,o,i={},a=t;if(null==a)return i;d.isFunction(e)?(o=d.allKeys(a),r=p(e,n)):(o=P(arguments,!1,!1,1),r=function(t,e,n){return e in n},a=Object(a));for(var s=0,u=o.length;s<u;s++){var c=o[s],l=a[c];r(l,c,a)&&(i[c]=l)}return i},d.omit=function(t,e,n){var r;return e=d.isFunction(e)?d.negate(e):(r=d.map(P(arguments,!1,!1,1),String),function(t,e){return!d.contains(r,e)}),d.pick(t,e,n)},d.defaults=y(d.allKeys,!0),d.clone=function(t){return d.isObject(t)?d.isArray(t)?t.slice():d.extend({},t):t},d.tap=function(t,e){return e(t),t},d.isMatch=function(t,e){var n=d.keys(e),r=n.length;if(null==t)return!r;for(var o=Object(t),i=0;i<r;i++){var a=n[i];if(e[a]!==o[a]||!(a in o))return!1}return!0};var E=function(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof d&&(t=t._wrapped),e instanceof d&&(e=e._wrapped);var o=l.call(t);if(o!==l.call(e))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e}var i="[object Array]"===o;if(!i){if("object"!=typeof t||"object"!=typeof e)return!1;var a=t.constructor,o=e.constructor;if(a!==o&&!(d.isFunction(a)&&a instanceof a&&d.isFunction(o)&&o instanceof o)&&"constructor"in t&&"constructor"in e)return!1}r=r||[];for(var s=(n=n||[]).length;s--;)if(n[s]===t)return r[s]===e;if(n.push(t),r.push(e),i){if((s=t.length)!==e.length)return!1;for(;s--;)if(!E(t[s],e[s],n,r))return!1}else{var u,c=d.keys(t),s=c.length;if(d.keys(e).length!==s)return!1;for(;s--;)if(u=c[s],!d.has(e,u)||!E(t[u],e[u],n,r))return!1}return n.pop(),r.pop(),!0};d.isEqual=function(t,e){return E(t,e)},d.isEmpty=function(t){return null==t||(g(t)&&(d.isArray(t)||d.isString(t)||d.isArguments(t))?0===t.length:0===d.keys(t).length)},d.isElement=function(t){return!(!t||1!==t.nodeType)},d.isArray=c||function(t){return"[object Array]"===l.call(t)},d.isObject=function(t){var e=typeof t;return"function"==e||"object"==e&&!!t},d.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){d["is"+e]=function(t){return l.call(t)==="[object "+e+"]"}}),d.isArguments(arguments)||(d.isArguments=function(t){return d.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(d.isFunction=function(t){return"function"==typeof t||!1}),d.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},d.isNaN=function(t){return d.isNumber(t)&&t!==+t},d.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===l.call(t)},d.isNull=function(t){return null===t},d.isUndefined=function(t){return void 0===t},d.has=function(t,e){return null!=t&&u.call(t,e)},d.noConflict=function(){return t._=e,this},d.identity=function(t){return t},d.constant=function(t){return function(){return t}},d.noop=function(){},d.property=function(e){return function(t){return null==t?void 0:t[e]}},d.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},d.matcher=d.matches=function(e){return e=d.extendOwn({},e),function(t){return d.isMatch(t,e)}},d.times=function(t,e,n){var r=Array(Math.max(0,t));e=p(e,n,1);for(var o=0;o<t;o++)r[o]=e(o);return r},d.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},d.now=Date.now||function(){return(new Date).getTime()};n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},y=d.invert(n),c=function(e){function n(t){return e[t]}var t="(?:"+d.keys(e).join("|")+")",r=RegExp(t),o=RegExp(t,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(o,n):t}};d.escape=c(n),d.unescape=c(y),d.result=function(t,e,n){e=null==t?void 0:t[e];return void 0===e&&(e=n),d.isFunction(e)?e.call(t):e};var x=0;d.uniqueId=function(t){var e=++x+"";return t?t+e:e},d.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};function J(t){return"\\"+A[t]}var I=/(.)^/,A={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},j=/\\|'|\r|\n|\u2028|\u2029/g;d.template=function(i,t,e){!t&&e&&(t=e),t=d.defaults({},t,d.templateSettings);var n=RegExp([(t.escape||I).source,(t.interpolate||I).source,(t.evaluate||I).source].join("|")+"|$","g"),a=0,s="__p+='";i.replace(n,function(t,e,n,r,o){return s+=i.slice(a,o).replace(j,J),a=o+t.length,e?s+="'+\n((__t=("+e+"))==null?'':_.escape(__t))+\n'":n?s+="'+\n((__t=("+n+"))==null?'':__t)+\n'":r&&(s+="';\n"+r+"\n__p+='"),t}),s+="';\n",s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+(s=!t.variable?"with(obj||{}){\n"+s+"}\n":s)+"return __p;\n";try{var r=new Function(t.variable||"obj","_",s)}catch(t){throw t.source=s,t}e=function(t){return r.call(this,t,d)},n=t.variable||"obj";return e.source="function("+n+"){\n"+s+"}",e},d.chain=function(t){t=d(t);return t._chain=!0,t};function T(t,e){return t._chain?d(e).chain():e}d.mixin=function(n){d.each(d.functions(n),function(t){var e=d[t]=n[t];d.prototype[t]=function(){var t=[this._wrapped];return o.apply(t,arguments),T(this,e.apply(d,t))}})},d.mixin(d),d.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var n=r[e];d.prototype[e]=function(){var t=this._wrapped;return n.apply(t,arguments),"shift"!==e&&"splice"!==e||0!==t.length||delete t[0],T(this,t)}}),d.each(["concat","join","slice"],function(t){var e=r[t];d.prototype[t]=function(){return T(this,e.apply(this._wrapped,arguments))}}),d.prototype.value=function(){return this._wrapped},d.prototype.valueOf=d.prototype.toJSON=d.prototype.value,d.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return d})}).call(this),function(t,_){"use strict";function n(t){return+t||0}function i(t,e){if(e<1)return"";for(var n="";0<e;)1&e&&(n+=t),e>>=1,t+=t;return n}function r(t){return null==t?"\\s":t.source||"["+y.escapeRegExp(t)+"]"}var o=_.prototype.trim,a=_.prototype.trimRight,s=_.prototype.trimLeft,u=[].slice;function c(t,e){var n,r,o=t.toLowerCase();for(e=[].concat(e),n=0;n<e.length;n+=1)if(r=e[n]){if(r.test&&r.test(t))return 1;if(r.toLowerCase()===o)return 1}}var e,l={lt:"<",gt:">",quot:'"',amp:"&",apos:"'"},f={};for(e in l)f[l[e]]=e;f["'"]="#39";var h,d,p=(h=i,(d=function(){return d.cache.hasOwnProperty(arguments[0])||(d.cache[arguments[0]]=d.parse(arguments[0])),d.format.call(null,d.cache[arguments[0]],arguments)}).format=function(t,e){for(var n,r,o,i,a,s,u=1,c=t.length,l=[],f=0;f<c;f++)if("string"===(n=m(t[f])))l.push(t[f]);else if("array"===n){if((i=t[f])[2])for(r=e[u],o=0;o<i[2].length;o++){if(!r.hasOwnProperty(i[2][o]))throw new Error(p('[_.sprintf] property "%s" does not exist',i[2][o]));r=r[i[2][o]]}else r=i[1]?e[i[1]]:e[u++];if(/[^s]/.test(i[8])&&"number"!=m(r))throw new Error(p("[_.sprintf] expecting number but found %s",m(r)));switch(i[8]){case"b":r=r.toString(2);break;case"c":r=_.fromCharCode(r);break;case"d":r=parseInt(r,10);break;case"e":r=i[7]?r.toExponential(i[7]):r.toExponential();break;case"f":r=i[7]?parseFloat(r).toFixed(i[7]):parseFloat(r);break;case"o":r=r.toString(8);break;case"s":r=(r=_(r))&&i[7]?r.substring(0,i[7]):r;break;case"u":r=Math.abs(r);break;case"x":r=r.toString(16);break;case"X":r=r.toString(16).toUpperCase()}r=/[def]/.test(i[8])&&i[3]&&0<=r?"+"+r:r,a=i[4]?"0"==i[4]?"0":i[4].charAt(1):" ",s=i[6]-_(r).length,s=i[6]?h(a,s):"",l.push(i[5]?r+s:s+r)}return l.join("")},d.cache={},d.parse=function(t){for(var e=t,n=[],r=[],o=0;e;){if(null!==(n=/^[^\x25]+/.exec(e)))r.push(n[0]);else if(null!==(n=/^\x25{2}/.exec(e)))r.push("%");else{if(null===(n=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(e)))throw new Error("[_.sprintf] huh?");if(n[2]){o|=1;var i=[],a=n[2],s=[];if(null===(s=/^([a-z_][a-z_\d]*)/i.exec(a)))throw new Error("[_.sprintf] huh?");for(i.push(s[1]);""!==(a=a.substring(s[0].length));)if(null!==(s=/^\.([a-z_][a-z_\d]*)/i.exec(a)))i.push(s[1]);else{if(null===(s=/^\[(\d+)\]/.exec(a)))throw new Error("[_.sprintf] huh?");i.push(s[1])}n[2]=i}else o|=2;if(3===o)throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");r.push(n)}e=e.substring(n[0].length)}return r},d);function m(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}var y={VERSION:"2.3.0",isBlank:function(t){return/^\s*$/.test(t=null==t?"":t)},stripTags:function(t){return null==t?"":_(t).replace(/<\/?[^>]+>/g,"")},capitalize:function(t){return(t=null==t?"":_(t)).charAt(0).toUpperCase()+t.slice(1)},chop:function(t,e){return null==t?[]:(t=_(t),0<(e=~~e)?t.match(new RegExp(".{1,"+e+"}","g")):[t])},clean:function(t){return y.strip(t).replace(/\s+/g," ")},count:function(t,e){if(null==t||null==e)return 0;t=_(t);for(var n=0,r=0,o=(e=_(e)).length;-1!==(r=t.indexOf(e,r));)n++,r+=o;return n},chars:function(t){return null==t?[]:_(t).split("")},swapCase:function(t){return null==t?"":_(t).replace(/\S/g,function(t){return t===t.toUpperCase()?t.toLowerCase():t.toUpperCase()})},escapeHTML:function(t){return null==t?"":_(t).replace(/[&<>"']/g,function(t){return"&"+f[t]+";"})},unescapeHTML:function(t){return null==t?"":_(t).replace(/\&([^;]+);/g,function(t,e){var n;return e in l?l[e]:(n=e.match(/^#x([\da-fA-F]+)$/))?_.fromCharCode(parseInt(n[1],16)):(n=e.match(/^#(\d+)$/))?_.fromCharCode(~~n[1]):t})},escapeRegExp:function(t){return null==t?"":_(t).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},splice:function(t,e,n,r){t=y.chars(t);return t.splice(~~e,~~n,r),t.join("")},insert:function(t,e,n){return y.splice(t,e,0,n)},include:function(t,e){return""===e||null!=t&&-1!==_(t).indexOf(e)},join:function(){var t=u.call(arguments),e=t.shift();return null==e&&(e=""),t.join(e)},lines:function(t){return null==t?[]:_(t).split("\n")},reverse:function(t){return y.chars(t).reverse().join("")},startsWith:function(t,e){return""===e||null!=t&&null!=e&&(t=_(t),e=_(e),t.length>=e.length&&t.slice(0,e.length)===e)},endsWith:function(t,e){return""===e||null!=t&&null!=e&&(t=_(t),e=_(e),t.length>=e.length&&t.slice(t.length-e.length)===e)},succ:function(t){return null==t?"":(t=_(t)).slice(0,-1)+_.fromCharCode(t.charCodeAt(t.length-1)+1)},titleize:function(t){return null==t?"":(t=_(t).toLowerCase()).replace(/(?:^|\s|-)\S/g,function(t){return t.toUpperCase()})},camelize:function(t){return y.trim(t).replace(/[-_\s]+(.)?/g,function(t,e){return e?e.toUpperCase():""})},underscored:function(t){return y.trim(t).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},dasherize:function(t){return y.trim(t).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()},classify:function(t){return y.titleize(_(t).replace(/[\W_]/g," ")).replace(/\s/g,"")},humanize:function(t){return y.capitalize(y.underscored(t).replace(/_id$/,"").replace(/_/g," "))},trim:function(t,e){return null==t?"":!e&&o?o.call(t):(e=r(e),_(t).replace(new RegExp("^"+e+"+|"+e+"+$","g"),""))},ltrim:function(t,e){return null==t?"":!e&&s?s.call(t):(e=r(e),_(t).replace(new RegExp("^"+e+"+"),""))},rtrim:function(t,e){return null==t?"":!e&&a?a.call(t):(e=r(e),_(t).replace(new RegExp(e+"+$"),""))},truncate:function(t,e,n){return null==t?"":(n=n||"...",e=~~e,(t=_(t)).length>e?t.slice(0,e)+n:t)},prune:function(t,e,n){if(null==t)return"";if(t=_(t),e=~~e,n=null!=n?_(n):"...",t.length<=e)return t;e=t.slice(0,e+1).replace(/.(?=\W*\w*$)/g,function(t){return t.toUpperCase()!==t.toLowerCase()?"A":" "});return((e=e.slice(e.length-2).match(/\w\w/)?e.replace(/\s*\S+$/,""):y.rtrim(e.slice(0,e.length-1)))+n).length>t.length?t:t.slice(0,e.length)+n},words:function(t,e){return y.isBlank(t)?[]:y.trim(t,e).split(e||/\s+/)},pad:function(t,e,n,r){t=null==t?"":_(t),e=~~e;var o=0;switch(n?1<n.length&&(n=n.charAt(0)):n=" ",r){case"right":return o=e-t.length,t+i(n,o);case"both":return o=e-t.length,i(n,Math.ceil(o/2))+t+i(n,Math.floor(o/2));default:return o=e-t.length,i(n,o)+t}},lpad:function(t,e,n){return y.pad(t,e,n)},rpad:function(t,e,n){return y.pad(t,e,n,"right")},lrpad:function(t,e,n){return y.pad(t,e,n,"both")},sprintf:p,vsprintf:function(t,e){return e.unshift(t),p.apply(null,e)},toNumber:function(t,e){return t?(t=y.trim(t)).match(/^-?\d+(?:\.\d+)?$/)?n((+t||0).toFixed(~~e)):NaN:0},numberFormat:function(t,e,n,r){if(isNaN(t)||null==t)return"";r="string"==typeof r?r:",";e=(t=t.toFixed(~~e)).split("."),t=e[0],e=e[1]?(n||".")+e[1]:"";return t.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+r)+e},strRight:function(t,e){if(null==t)return"";t=_(t);var n=(e=null!=e?_(e):e)?t.indexOf(e):-1;return~n?t.slice(n+e.length,t.length):t},strRightBack:function(t,e){if(null==t)return"";t=_(t);var n=(e=null!=e?_(e):e)?t.lastIndexOf(e):-1;return~n?t.slice(n+e.length,t.length):t},strLeft:function(t,e){if(null==t)return"";t=_(t);e=(e=null!=e?_(e):e)?t.indexOf(e):-1;return~e?t.slice(0,e):t},strLeftBack:function(t,e){if(null==t)return"";e=(t+="").lastIndexOf(e=null!=e?""+e:e);return~e?t.slice(0,e):t},toSentence:function(t,e,n,r){e=e||", ",n=n||" and ";var o=t.slice(),i=o.pop();return 2<t.length&&r&&(n=y.rtrim(e)+n),o.length?o.join(e)+n+i:i},toSentenceSerial:function(){var t=u.call(arguments);return t[3]=!0,y.toSentence.apply(y,t)},slugify:function(t){if(null==t)return"";var e="ąàáäâãåæăćęèéëêìíïîłńòóöôõøśșțùúüûñçżź",n=new RegExp(r(e),"g");return t=_(t).toLowerCase().replace(n,function(t){t=e.indexOf(t);return"aaaaaaaaaceeeeeiiiilnoooooosstuuuunczz".charAt(t)||"-"}),y.dasherize(t.replace(/[^\w\s-]/g,""))},surround:function(t,e){return[e,t,e].join("")},quote:function(t,e){return y.surround(t,e||'"')},unquote:function(t,e){return e=e||'"',t[0]===e&&t[t.length-1]===e?t.slice(1,t.length-1):t},exports:function(){var t,e={};for(t in this)this.hasOwnProperty(t)&&!t.match(/^(?:include|contains|reverse)$/)&&(e[t]=this[t]);return e},repeat:function(t,e,n){if(null==t)return"";if(e=~~e,null==n)return i(_(t),e);for(var r=[];0<e;r[--e]=t);return r.join(n)},naturalCmp:function(t,e){if(t==e)return 0;if(!t)return-1;if(!e)return 1;for(var n=/(\.\d+)|(\d+)|(\D+)/g,r=_(t).toLowerCase().match(n),o=_(e).toLowerCase().match(n),i=Math.min(r.length,o.length),a=0;a<i;a++){var s=r[a],u=o[a];if(s!==u){var c=parseInt(s,10);if(!isNaN(c)){var l=parseInt(u,10);if(!isNaN(l)&&c-l)return c-l}return s<u?-1:1}}return r.length===o.length?r.length-o.length:t<e?-1:1},levenshtein:function(t,e){if(null==t&&null==e)return 0;if(null==t)return _(e).length;if(null==e)return _(t).length;t=_(t),e=_(e);for(var n,r,o=[],i=0;i<=e.length;i++)for(var a=0;a<=t.length;a++)r=i&&a?t.charAt(a-1)===e.charAt(i-1)?n:Math.min(o[a],o[a-1],n)+1:i+a,n=o[a],o[a]=r;return o.pop()},toBoolean:function(t,e,n){return"string"!=typeof(t="number"==typeof t?""+t:t)?!!t:!!c(t=y.trim(t),e||["true","1"])||!c(t,n||["false","0"])&&void 0}};y.strip=y.trim,y.lstrip=y.ltrim,y.rstrip=y.rtrim,y.center=y.lrpad,y.rjust=y.lpad,y.ljust=y.rpad,y.contains=y.include,y.q=y.quote,y.toBool=y.toBoolean,"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(module.exports=y),exports._s=y),"function"==typeof define&&define.amd&&define("underscore.string",[],function(){return y}),t._=t._||{},t._.string=t._.str=y}(this,String);var py={};!function(P){var t,e,n,r,l,f,h,d,p,o,i,m=function(t,e){function n(){}n.prototype=t;var r=new n;if(e)for(var o in e)e.hasOwnProperty(o)&&(r[o]=e[o]);return r},y={},a={},s={nud:function(){throw new Error(this.id+" undefined as prefix")},led:function(t){throw new Error(this.id+" undefined as infix")},toString:function(){if("(constant)"===this.id||"(number)"===this.id||"(name)"===this.id||"(string)"===this.id)return[this.id.slice(0,this.id.length-1)," ",this.value,")"].join("");if("(end)"===this.id)return"(end)";if("(comparator)"!==this.id)return"("+[this.id,this.first,this.second,this.third].filter(function(t){return t}).join(" ")+")";for(var t=["(comparator",this.expressions[0]],e=0;e<this.operators.length;++e)t.push(this.operators[e],this.expressions[e+1]);return t.join(" ")+")"}};function u(t,e){e=e||0;var n=y[t];return n?(e>n.lbp&&(n.lbp=e),n):y[t]=m(s,{id:t,lbp:e})}function c(t){var e=u(t);e.id="(constant)",e.value=t,e.nud=function(){return this}}function v(t,e,n){u(t).nud=n||function(){return this.first=b(e),this}}function g(t,e,n){u(t,e).led=n||function(t){return this.first=t,this.second=b(e),this}}function w(t,e){u(t,e).led=function(t){return this.first=t,this.second=b(e-1),this}}function N(e){a[e]=!0;g(e,60,function(t){for(this.id="(comparator)",this.operators=[e],this.expressions=[t,b(60)];o.id in a;)this.operators.push(o.id),O(),this.expressions.push(b(60));return this})}function Y(){return"("+Array.prototype.join.call(arguments,"|")+")"}function b(t){t=t||0;var e=o;o=i();for(var n=e.nud();t<o.lbp;)e=o,o=i(),n=e.led(n);return n}function O(t){if(t&&o.id!==t)throw new Error('Expected "'+t+'", got "'+o.id+'"');o=i()}function S(t,e){switch(t){case void 0:throw new Error("NameError: name '"+e+"' is not defined");case null:return P.None;case!0:return P.True;case!1:return P.False}if(P.object,P.PY_isInstance(t,P.object)||P.PY_isSubclass(t,P.object))return t;switch(typeof t){case"number":return P.float.fromJSON(t);case"string":return P.str.fromJSON(t);case"function":return P.PY_def.fromJSON(t)}switch(t.constructor){case Object:var n,r=P.PY_call(P.object);for(n in t)t.hasOwnProperty(n)&&(r[n]=t[n]);return r;case Array:return P.list.fromJSON(t)}throw new Error("Could not convert "+t+" to a pyval")}function E(t){return t.__class__?t.__class__.__name__:"object"!=typeof t?typeof t:t.constructor.name}c("None"),c("False"),c("True"),u("(number)").nud=function(){return this},u("(name)").nud=function(){return this},u("(string)").nud=function(){return this},u("(end)"),u(":"),u(")"),u("]"),u("}"),u(","),u("else"),g("=",10,function(t){if("(name)"!==t.id)throw new Error("Expected keyword argument name, got "+o.id);return this.first=t,this.second=b(),this}),u("lambda",20).nud=function(){if(this.first=[],":"!==o.id)for(;;){if("(name)"!==o.id)throw new Error("Excepted an argument name");if(this.first.push(o),O(),","!==o.id)break;O(",")}return O(":"),this.second=b(),this},g("if",20,function(t){return this.first=t,this.second=b(),O("else"),this.third=b(),this}),w("or",30),w("and",40),v("not",50),N("in"),N("not in"),N("is"),N("is not"),N("<"),N("<="),N(">"),N(">="),N("<>"),N("!="),N("=="),g("|",70),g("^",80),g("&",90),g("<<",100),g(">>",100),g("+",110),g("-",110),g("*",120),g("/",120),g("//",120),g("%",120),v("-",130),v("+",130),v("~",130),w("**",140),g(".",150,function(t){if("(name)"!==o.id)throw new Error("Expected attribute name, got "+o.id);return this.first=t,this.second=o,O(),this}),u("(",150).nud=function(){var t=!(this.first=[]);if(")"!==o.id)for(;")"!==o.id&&(this.first.push(b()),","===o.id);)t=!0,O(",");return O(")"),!this.first.length||t?this:this.first[0]},u("(").led=function(t){if(this.first=t,this.second=[],")"!==o.id)for(;this.second.push(b()),","===o.id;)O(",");return O(")"),this},g("[",150,function(t){return this.first=t,this.second=b(),O("]"),this}),u("[").nud=function(){if(this.first=[],"]"!==o.id)for(;"]"!==o.id&&(this.first.push(b()),","===o.id);)O(",");return O("]"),this},u("{").nud=function(){if(this.first=[],"}"!==o.id)for(;"}"!==o.id;){var t=b();O(":");var e=b();if(this.first.push([t,e]),","!==o.id)break;O(",")}return O("}"),this},P.tokenize=(J="[ \\f\\t]*",t="[a-zA-Z_]\\w*",e=Y("\\d+\\.\\d*","\\.\\d+"),n=Y(e,"\\d+(L|l)?"),r=Y("\\*\\*=?",">>=?","<<=?","<>","!=","//=?","[+\\-*/%&|^=<>]=?","~"),e=Y(r,"[\\[\\]\\(\\)\\{\\}]","[:;.,`@]"),r=Y("([uU])?'([^\n'\\\\]*(?:\\\\.[^\n'\\\\]*)*)'",'([uU])?"([^\n"\\\\]*(?:\\\\.[^\n"\\\\]*)*)"'),l=J+Y(n,e,r,t),f=new RegExp("^"+n+"$"),h=new RegExp("^"+r+"$"),d=new RegExp("^"+t+"$"),p=new RegExp("^"+J),function(t){for(var e,n,r=t.length,o=[],i=new RegExp(l,"g");i.lastIndex<r;){var a=i.exec(t);if(!a){if(/^\s+$/.test(t.slice(n)))break;throw new Error("Failed to tokenize <<"+t+">> at index "+(n||0)+"; parsed so far: "+o)}e=a.index,n=i.lastIndex;var s,u=t.slice(e,n).replace(p,"");if(f.test(u))o.push(m(y["(number)"],{value:parseFloat(u)}));else if(h.test(u)){var c=h.exec(u),a=void 0!==c[3]?c[3]:c[5];o.push(m(y["(string)"],{unicode:!(!c[2]&&!c[4]),value:a}))}else if(u in y)"in"===u&&1<o.length&&"not"===o[o.length-1].id?(s=y["not in"],o.pop()):"not"===u&&1<o.length&&"is"===o[o.length-1].id?(s=y["is not"],o.pop()):s=y[u],o.push(m(s));else{if(!d.test(u))throw new Error("Tokenizing failure of <<"+t+">> at index "+e+" for token [["+u+"]]; parsed so far: "+o);o.push(m(y["(name)"],{value:u}))}}return o.push(m(y["(end)"])),o}),P.py={},P.PY_parseArgs=function(t,e){var n={},r=t[0],o={};for(f in t[1])t[1].hasOwnProperty(f)&&(o[f]=t[1][f]);"string"==typeof e&&(e=e.split(/\s+/));function i(t){if("string"==typeof t)return t;if(t instanceof Array&&2===t.length)return t[0];throw new Error("TypeError: unknown format specification "+JSON.stringify(t))}for(var a,s=0;s<r.length;++s){if(!(a=e[s])||"*"===a)throw new Error("TypeError: function takes exactly "+(s-1)+" positional arguments ("+r.length+" given");if(/^\*\w/.test(a)){n[i(a.slice(1))]=r.slice(s);break}n[i(a)]=r[s]}for(var u,c=s;c<e.length;++c){if((_=i(a=e[c]))in n)throw new Error("TypeError: function got multiple values for keyword argument '"+kwarg+"'");if(/^\*\*\w/.test(_)){n[_.slice(2)]=o,o={};break}_ in o&&(n[_]=o[_],delete o[_])}for(u in o)throw new Error("TypeError: function got an unexpected keyword argument '"+u+"'");for(var l=0,f=0;f<e.length;++f)if(/^\*/.test(e[f])){l=1;break}for(f=0;f<e.length;++f){var _=i(a=e[f]);if(!(/^\*/.test(_)||_ in n)){if(!(a instanceof Array))throw new Error("TypeError: function takes exactly "+(e.length-l)+" arguments");n[_]=a[1]}}return n},P.PY_hasAttr=function(t,e){try{return P.PY_getAttr(t,e),!0}catch(t){return!1}},P.PY_getAttr=function(t,e){return S(t.__getattribute__(e))},P.PY_str=function(t){t=t.__str__();if(P.PY_isInstance(t,P.str))return t;throw new Error("TypeError: __str__ returned non-string (type "+E(t)+")")},P.PY_isInstance=function(t,e){function n(){}return n.prototype=e,t instanceof n},P.PY_isSubclass=function(t,e){function n(){}return t===(n.prototype=e)||t instanceof n},P.PY_call=function(t,e,n){if("object"!=typeof(e=e||[])||e instanceof Array||(n=e,e=[]),n=n||{},t.__is_type){function r(){}var o=t.__new__.call(t,e,n);return r.prototype=t,o instanceof r&&o.__init__.call(o,e,n),o}return t.__call__(e,n)},P.PY_isTrue=function(t){t=t.__nonzero__();if(t===P.True)return!0;if(t===P.False)return!1;throw new Error("TypeError: __nonzero__ should return bool, returned "+E(t))},P.PY_not=function(t){return!P.PY_isTrue(t)},P.PY_size=function(t){if(!t.__len__)throw new Error("TypeError: object of type '"+E(t)+"' has no len()");t=t.__len__();if("number"!=typeof t)throw new Error("TypeError: a number is required");return t},P.PY_getItem=function(t,e){if(!("__getitem__"in t))throw new Error("TypeError: '"+E(t)+"' object is unsubscriptable");if(!P.PY_isInstance(e,P.object))throw new Error("TypeError: '"+E(e)+"' is not a py.js object");t=t.__getitem__(e);if(!P.PY_isInstance(e,P.object))throw new Error("TypeError: __getitem__ must return a py.js object, got "+E(t));return t},P.PY_setItem=function(t,e,n){if(!("__setitem__"in t))throw new Error("TypeError: '"+E(t)+"' object does not support item assignment");if(!P.PY_isInstance(e,P.object))throw new Error("TypeError: '"+E(e)+"' is not a py.js object");if(!P.PY_isInstance(n,P.object))throw new Error("TypeError: '"+E(n)+"' is not a py.js object");t.__setitem__(e,n)},P.PY_add=function(t,e){return T(t,e,"+")},P.PY_subtract=function(t,e){return T(t,e,"-")},P.PY_multiply=function(t,e){return T(t,e,"*")},P.PY_divide=function(t,e){return T(t,e,"/")},P.PY_negative=function(t){if(!t.__neg__)throw new Error("TypeError: bad operand for unary -: '"+E(t)+"'");return t.__neg__()},P.PY_positive=function(t){if(!t.__pos__)throw new Error("TypeError: bad operand for unary +: '"+E(t)+"'");return t.__pos__()},P.type=function(t,e,n){if("string"!=typeof t)throw new Error("ValueError: a class name should be a string");if(e&&0!==e.length){if(1<e.length)throw new Error("ValueError: can't provide multiple bases for a new type")}else e=[P.object];var r=e[0],o=m(r);if(n)for(var i in n)n.hasOwnProperty(i)&&(o[i]=n[i]);return(o.__class__=o).__name__=t,o.__bases__=e,o.__is_type=!0,o},P.type.__call__=function(){return P.PY_parseArgs(arguments,["object"]).object.__class__};var x=0;P.object=P.type("object",[{}],{__new__:function(){var t=m(this);return t.__is_type=!1,t},__init__:function(){},__hash__:function(){return this._hash||(this._hash="\0\0\0"+String(x++))},__eq__:function(t){return this===t?P.True:P.False},__ne__:function(t){return P.PY_isTrue(this.__eq__(t))?P.False:P.True},__lt__:function(){return P.NotImplemented},__le__:function(){return P.NotImplemented},__ge__:function(){return P.NotImplemented},__gt__:function(){return P.NotImplemented},__str__:function(){return this.__unicode__()},__unicode__:function(){return P.str.fromJSON("<"+E(this)+" object>")},__nonzero__:function(){return P.True},__getattribute__:function(t){if(t in this){var e=this[t];return"object"==typeof e&&"__get__"in e?e.__get__(this,P.PY_call(P.type,[this])):"function"!=typeof e||this.hasOwnProperty(t)?e:A.fromJSON(e,this)}if("__getattr__"in this)return this.__getattr__(t);throw new Error("AttributeError: object has no attribute '"+t+"'")},__setattr__:function(t,e){t in this&&"__set__"in this[t]&&this[t].__set__(this,e),this[t]=e},toJSON:function(){throw new Error(this.constructor.name+" can not be converted to JSON")}});var J=P.type("NoneType",null,{__nonzero__:function(){return P.False},toJSON:function(){return null}});P.None=P.PY_call(J),J=P.type("NotImplementedType",null,{}),P.NotImplemented=P.PY_call(J);var I=!1;P.bool=P.type("bool",null,{__new__:function(){if(!I)return P.object.__new__.apply(this);var t={},e=P.PY_parseArgs(arguments,[["value",t]]);return e.value!==t&&P.PY_isTrue(e.value)?P.True:P.False},__str__:function(){return P.str.fromJSON(this===P.True?"True":"False")},__nonzero__:function(){return this},fromJSON:function(t){return t?P.True:P.False},toJSON:function(){return this===P.True}}),P.True=P.PY_call(P.bool),P.False=P.PY_call(P.bool),I=!0,P.float=P.type("float",null,{__init__:function(){var t={},e=P.PY_parseArgs(arguments,[["value",t]]).value;if(e!==t){if(P.PY_isInstance(e,P.float)&&(this._value=e._value),P.PY_isInstance(e,P.object)&&"__float__"in e){e=e.__float__();if(P.PY_isInstance(e,P.float))return void(this._value=e._value);throw new Error("TypeError: __float__ returned non-float (type "+E(e)+")")}throw new Error("TypeError: float() argument must be a string or a number")}this._value=0},__str__:function(){return P.str.fromJSON(String(this._value))},__eq__:function(t){return this._value===t._value?P.True:P.False},__lt__:function(t){return P.PY_isInstance(t,P.float)?this._value<t._value?P.True:P.False:P.NotImplemented},__le__:function(t){return P.PY_isInstance(t,P.float)?this._value<=t._value?P.True:P.False:P.NotImplemented},__gt__:function(t){return P.PY_isInstance(t,P.float)?this._value>t._value?P.True:P.False:P.NotImplemented},__ge__:function(t){return P.PY_isInstance(t,P.float)?this._value>=t._value?P.True:P.False:P.NotImplemented},__abs__:function(){return P.float.fromJSON(Math.abs(this._value))},__add__:function(t){return P.PY_isInstance(t,P.float)?P.float.fromJSON(this._value+t._value):P.NotImplemented},__mod__:function(t){return P.PY_isInstance(t,P.float)?P.float.fromJSON(this._value%t._value):P.NotImplemented},__neg__:function(){return P.float.fromJSON(-this._value)},__sub__:function(t){return P.PY_isInstance(t,P.float)?P.float.fromJSON(this._value-t._value):P.NotImplemented},__mul__:function(t){return P.PY_isInstance(t,P.float)?P.float.fromJSON(this._value*t._value):P.NotImplemented},__pow__:function(t){return P.PY_isInstance(t,P.float)?P.float.fromJSON(Math.pow(this._value,t._value)):P.NotImplemented},__div__:function(t){return P.PY_isInstance(t,P.float)?P.float.fromJSON(this._value/t._value):P.NotImplemented},__nonzero__:function(){return this._value?P.True:P.False},fromJSON:function(t){if("number"!=typeof t)throw new Error("py.float.fromJSON can only take numbers");var e=P.PY_call(P.float);return e._value=t,e},toJSON:function(){return this._value}}),P.str=P.type("str",null,{__init__:function(){var t={},e=P.PY_parseArgs(arguments,[["value",t]]).value;this._value=e!==t?P.PY_str(e)._value:""},__hash__:function(){return"\0"+this._value},__str__:function(){return this},__eq__:function(t){return P.PY_isInstance(t,P.str)&&this._value===t._value?P.True:P.False},__lt__:function(t){return P.PY_not(P.PY_call(P.isinstance,[t,P.str]))?P.NotImplemented:this._value<t._value?P.True:P.False},__le__:function(t){return P.PY_isInstance(t,P.str)?this._value<=t._value?P.True:P.False:P.NotImplemented},__gt__:function(t){return P.PY_isInstance(t,P.str)?this._value>t._value?P.True:P.False:P.NotImplemented},__ge__:function(t){return P.PY_isInstance(t,P.str)?this._value>=t._value?P.True:P.False:P.NotImplemented},__add__:function(t){return P.PY_isInstance(t,P.str)?P.str.fromJSON(this._value+t._value):P.NotImplemented},__nonzero__:function(){return this._value.length?P.True:P.False},__contains__:function(t){return-1!==this._value.indexOf(t._value)?P.True:P.False},fromJSON:function(t){if("string"!=typeof t)throw new Error("str.fromJSON can only take strings");var e=P.PY_call(P.str);return e._value=t,e},toJSON:function(){return this._value}}),P.tuple=P.type("tuple",null,{__init__:function(){this._values=[]},__len__:function(){return this._values.length},__nonzero__:function(){return 0<P.PY_size(this)?P.True:P.False},__contains__:function(t){for(var e=0,n=this._values.length;e<n;++e)if(P.PY_isTrue(this._values[e].__eq__(t)))return P.True;return P.False},__getitem__:function(t){return this._values[t.toJSON()]},toJSON:function(){for(var t=[],e=0;e<this._values.length;++e)t.push(this._values[e].toJSON());return t},fromJSON:function(t){if(!(t instanceof Array))throw new Error("Can only create a py.tuple from an Array");for(var e=P.PY_call(P.tuple),n=0;n<t.length;++n)e._values.push(S(t[n]));return e}}),P.list=P.type("list",null,{__nonzero__:function(){return 0<this.__len__?P.True:P.False}}),_.defaults(P.list,P.tuple),P.dict=P.type("dict",null,{__init__:function(){this._store={}},__getitem__:function(t){var e=t.__hash__();if(!(e in this._store))throw new Error("KeyError: '"+t.toJSON()+"'");return this._store[e][1]},__setitem__:function(t,e){this._store[t.__hash__()]=[t,e]},__len__:function(){return Object.keys(this._store).length},__nonzero__:function(){return 0<P.PY_size(this)?P.True:P.False},get:function(){var t=P.PY_parseArgs(arguments,["k",["d",P.None]]),e=t.k.__hash__();return e in this._store?this._store[e][1]:t.d},fromJSON:function(t){var e,n=P.PY_call(P.dict);for(e in t||{})t.hasOwnProperty(e)&&n.__setitem__(P.str.fromJSON(e),S(t[e]));return n},toJSON:function(){var t,e={};for(t in this._store){var n=this._store[t];e[n[0].toJSON()]=n[1].toJSON()}return e}}),P.PY_def=P.type("function",null,{__call__:function(){return this._func.apply(this._inst,arguments)},fromJSON:function(t){var e=P.PY_call(P.PY_def);return e._inst=null,e._func=t,e},toJSON:function(){return this._func}}),P.classmethod=P.type("classmethod",null,{__init__:function(){var t=P.PY_parseArgs(arguments,"function");this._func=t.function},__get__:function(t,e){return A.fromJSON(this._func,e)},fromJSON:function(t){return P.PY_call(P.classmethod,[t])}});var A=P.type("instancemethod",[P.PY_def],{fromJSON:function(t,e){var n=P.PY_call(A);return n._inst=e,n._func=t,n}});P.abs=new P.PY_def.fromJSON(function(){var t=P.PY_parseArgs(arguments,["number"]);if(!t.number.__abs__)throw new Error("TypeError: bad operand type for abs(): '"+E(t.number)+"'");return t.number.__abs__()}),P.len=new P.PY_def.fromJSON(function(){var t=P.PY_parseArgs(arguments,["object"]);return P.float.fromJSON(P.PY_size(t.object))}),P.isinstance=new P.PY_def.fromJSON(function(){var t=P.PY_parseArgs(arguments,["object","class"]);return P.PY_isInstance(t.object,t.class)?P.True:P.False}),P.issubclass=new P.PY_def.fromJSON(function(){var t=P.PY_parseArgs(arguments,["C","B"]);return P.PY_isSubclass(t.C,t.B)?P.True:P.False});var j={"==":["eq","eq",function(t,e){return t===e}],"!=":["ne","ne",function(t,e){return t!==e}],"<>":["ne","ne",function(t,e){return t!==e}],"<":["lt","gt",function(t,e){return t.__class__.__name__<e.__class__.__name__}],"<=":["le","ge",function(t,e){return t.__class__.__name__<=e.__class__.__name__}],">":["gt","lt",function(t,e){return t.__class__.__name__>e.__class__.__name__}],">=":["ge","le",function(t,e){return t.__class__.__name__>=e.__class__.__name__}],"+":["add","radd"],"-":["sub","rsub"],"*":["mul","rmul"],"/":["div","rdiv"],"//":["floordiv","rfloordiv"],"%":["mod","rmod"],"**":["pow","rpow"],"<<":["lshift","rlshift"],">>":["rshift","rrshift"],"&":["and","rand"],"^":["xor","rxor"],"|":["or","ror"]},T=function(t,e,n){var r,o=j[n],i="__"+o[0]+"__",a="__"+o[1]+"__",o=o[2];if(i in t&&(r=t[i](e))!==P.NotImplemented)return r;if(a in e&&(r=e[a](t))!==P.NotImplemented)return r;if(o)return S(o(t,e));throw new Error("TypeError: unsupported operand type(s) for "+n+": '"+E(t)+"' and '"+E(e)+"'")},k={type:P.type,None:P.None,True:P.True,False:P.False,NotImplemented:P.NotImplemented,object:P.object,bool:P.bool,float:P.float,str:P.str,unicode:P.unicode,tuple:P.tuple,list:P.list,dict:P.dict,abs:P.abs,len:P.len,isinstance:P.isinstance,issubclass:P.issubclass,classmethod:P.classmethod};P.parse=function(t){var e=0;return o=t[0],i=function(){return t[++e]},b()},P.evaluate=function(t,e){switch(e=e||{},t.id){case"(name)":var n=e[t.value];return void 0===n&&t.value in k?k[t.value]:S(n,t.value);case"(string)":return P.str.fromJSON(function(t,e){for(var n=[],r={"\\":"\\",'"':'"',"'":"'",a:"",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t",v:"\v"},o=0;o<t.length;++o)if("\\"===t[o]){var i=t[o+1];if(i in r)n.push(r[i]),++o;else{switch(i){case"\n":++o;continue;case"N":if(!e)break;throw Error("SyntaxError: \\N{} escape not implemented");case"u":if(!e)break;var a=t.slice(o+2,o+6);if(!/[0-9a-f]{4}/i.test(a))throw new Error(["SyntaxError: (unicode error) 'unicodeescape' codec"," can't decode bytes in position ",o,"-",o+4,": truncated \\uXXXX escape"].join(""));a=parseInt(a,16),n.push(String.fromCharCode(a)),o+=5;continue;case"U":if(!e)break;throw Error("SyntaxError: \\U escape not implemented");case"x":var s=t.slice(o+2,o+4);if(!/[0-9a-f]{2}/i.test(s)){if(!e)throw new Error("ValueError: invalid \\x escape");throw new Error(["SyntaxError: (unicode error) 'unicodeescape'"," codec can't decode bytes in position ",o,"-",o+2,": truncated \\xXX escape"].join(""))}a=parseInt(s,16),n.push(String.fromCharCode(a)),o+=3;continue;default:if(!/[0-8]/.test(i))break;s=/[0-8]{1,3}/g;s.lastIndex=o+1;s=s.exec(t)[0],a=parseInt(s,8);n.push(String.fromCharCode(a)),o+=s.length;continue}n.push("\\")}}else n.push(t[o]);return n.join("")}(t.value,t.unicode));case"(number)":return P.float.fromJSON(t.value);case"(constant)":switch(t.value){case"None":return P.None;case"False":return P.False;case"True":return P.True}throw new Error("SyntaxError: unknown constant '"+t.value+"'");case"(comparator)":for(var r,o=P.evaluate(t.expressions[0],e),i=0;i<t.operators.length;++i)if(r=function(t,e,n){switch(t){case"is":return e===n?P.True:P.False;case"is not":return e!==n?P.True:P.False;case"in":return n.__contains__(e);case"not in":return P.PY_isTrue(n.__contains__(e))?P.False:P.True;case"==":case"!=":case"<>":case"<":case"<=":case">":case">=":return T(e,n,t)}throw new Error("SyntaxError: unknown comparator [["+t+"]]")}(t.operators[i],o,o=P.evaluate(t.expressions[i+1],e)),P.PY_not(r))return P.False;return P.True;case"not":return P.PY_isTrue(P.evaluate(t.first,e))?P.False:P.True;case"and":n=P.evaluate(t.first,e);return P.PY_isTrue(n.__nonzero__())?P.evaluate(t.second,e):n;case"or":var a=P.evaluate(t.first,e);return P.PY_isTrue(a.__nonzero__())?a:P.evaluate(t.second,e);case"(":if(t.second){for(var a=P.evaluate(t.first,e),s=[],u={},c=0;c<t.second.length;++c){var l=t.second[c];"="!==l.id?s.push(P.evaluate(l,e)):u[l.first.value]=P.evaluate(l.second,e)}return P.PY_call(a,s,u)}for(var f=t.first,_=[],h=0,d=f.length;h<d;++h)_.push(P.evaluate(f[h],e));return P.tuple.fromJSON(_);case"[":if(t.second)return P.PY_getItem(P.evaluate(t.first,e),P.evaluate(t.second,e));for(var p=t.first,m=[],y=0;y<p.length;++y)m.push(P.evaluate(p[y],e));return P.list.fromJSON(m);case"{":for(var v=t.first,g=P.PY_call(P.dict),w=0;w<v.length;++w)P.PY_setItem(g,P.evaluate(v[w][0],e),P.evaluate(v[w][1],e));return g;case".":if("(name)"!==t.second.id)throw new Error("SyntaxError: "+t);return P.PY_getAttr(P.evaluate(t.first,e),t.second.value);case"~":return P.evaluate(t.first,e).__invert__();case"+":if(!t.second)return P.PY_positive(P.evaluate(t.first,e));case"-":if(!t.second)return P.PY_negative(P.evaluate(t.first,e));case"*":case"/":case"//":case"%":case"**":case"<<":case">>":case"&":case"^":case"|":return T(P.evaluate(t.first,e),P.evaluate(t.second,e),t.id);default:throw new Error("SyntaxError: Unknown node [["+t.id+"]]")}},P.eval=function(t,e){return P.evaluate(P.parse(P.tokenize(t)),e).toJSON()}}("undefined"==typeof exports?py:exports),function(s){"use strict";function l(t,e,n){var r=t%e;return(0<r&&e<0||r<0&&0<e)&&(r+=e),n(Math.floor(t/e),r)}function u(t,e){var n=t%1;return n<0&&(n+=1),e(n,Math.floor(t))}function f(t){if(!t)throw new Error("AssertionError")}function e(){}e.prototype=s.object;for(var i=function(t){return t instanceof e?t.toJSON():t},a=s.PY_call(s.object),c=s.float.fromJSON(0),h=[null,31,28,31,30,31,30,31,31,30,31,30,31],d=[null],t=0,n=1;n<h.length;++n)d.push(t),t+=h[n];function p(t){return t%4==0&&(t%100!=0||t%400==0)}function o(t){t-=1;return 365*t+Math.floor(t/4)-Math.floor(t/100)+Math.floor(t/400)}function m(t,e){return 2===e&&p(t)?29:h[e]}function y(t,e,n){var r=m(t,e);if(!(1<=n&&n<=r))throw new Error("ValueError: day must be in 1.."+r);return o(t)+(t=t,t=2<(e=e)&&p(t),d[e]+(t?1:0))+n}function v(t,e){var n=3*((n=e,Math.ceil(n/3))-1)+1;return[{year:t,month:n,day:1},{year:t,month:2+n,day:m(t,e)}]}function g(t,e,n){return(new Date(t,e-1,n).getDay()+6)%7}var w=o(401),P=o(101),N=o(5);function r(n,r,o,i,a,s,u){i=i||0,a=a||0,s=s||0,((u=u||0)<0||999999<u)&&l(u,1e6,function(t,e){u=e,s+=t}),(s<0||59<s)&&l(s,60,function(t,e){s=e,a+=t}),(a<0||59<a)&&l(a,60,function(t,e){a=e,i+=t}),(i<0||23<i)&&l(i,24,function(t,e){i=e,o+=t}),(r<1||12<r)&&l(r-1,12,function(t,e){r=e+1,n+=t});var t=m(n,r);return(o<1||t<o)&&(0===o?o=0<--r?m(n,r):(--n,r=12,31):o==t+1?(o=1,12<++r&&(r=1,++n)):(t=function(t){var n,r,o,i,a;l(--t,w,function(t,e){n=t,l(e,P,function(t,e){r=t,l(e,N,function(t,e){o=t,l(e,365,function(t,e){i=t,a=e})})})}),t=a;var e=400*n+1+100*r+4*o+i;if(4==i||100==r)return f(0===a),{year:e-1,month:12,day:31};var s=3===i&&(24!==o||3==r);f(s==p(e));var u=t+50>>5,c=d[u]+(2<u&&s?1:0);return t<c&&(c-=h[--u]+(2===u&&s?1:0)),{year:e,month:u,day:(t-=c)+1}}(y(n,r,1)+(o-1)),n=t.year,r=t.month,o=t.day)),{year:n,month:r,day:o,hour:i,minute:a,second:s,microsecond:u}}a.timedelta=s.type("timedelta",null,{__init__:function(){var t=s.PY_parseArgs(arguments,[["days",c],["seconds",c],["microseconds",c],["milliseconds",c],["minutes",c],["hours",c],["weeks",c]]),r=0,o=0,i=0,e=t.days.toJSON()+7*t.weeks.toJSON(),n=t.seconds.toJSON()+60*t.minutes.toJSON()+3600*t.hours.toJSON(),t=t.microseconds.toJSON()+1e3*t.milliseconds.toJSON(),a=u(e,function(t,e){return r=e,t?u(24*t*3600,function(t,e){return o=e,t}):0}),e=u(n,function(t,e){return n=e,t+a});l(n,86400,function(t,e){r+=t,o+=e}),l(t+=1e6*e,1e6,function(t,n){l(t,86400,function(t,e){r+=t,o+=e,i+=Math.round(n)})}),this.days=r,this.seconds=o,this.microseconds=i},__str__:function(){var r,o,i;l(this.seconds,60,function(t,n){l(t,60,function(t,e){r=t,o=e,i=n})});var t=_.str.sprintf("%d:%02d:%02d",r,o,i);return this.days&&(t=_.str.sprintf("%d day%s, %s",this.days,1!=this.days&&-1!=this.days?"s":"",t)),this.microseconds&&(t=_.str.sprintf("%s.%06d",t,this.microseconds)),s.str.fromJSON(t)},__eq__:function(t){return s.PY_isInstance(t,a.timedelta)&&this.days===t.days&&this.seconds===t.seconds&&this.microseconds===t.microseconds?s.True:s.False},__add__:function(t){return s.PY_isInstance(t,a.timedelta)?s.PY_call(a.timedelta,[s.float.fromJSON(this.days+t.days),s.float.fromJSON(this.seconds+t.seconds),s.float.fromJSON(this.microseconds+t.microseconds)]):s.NotImplemented},__radd__:function(t){return this.__add__(t)},__sub__:function(t){return s.PY_isInstance(t,a.timedelta)?s.PY_call(a.timedelta,[s.float.fromJSON(this.days-t.days),s.float.fromJSON(this.seconds-t.seconds),s.float.fromJSON(this.microseconds-t.microseconds)]):s.NotImplemented},__rsub__:function(t){return s.PY_isInstance(t,a.timedelta)?this.__neg__().__add__(t):s.NotImplemented},__neg__:function(){return s.PY_call(a.timedelta,[s.float.fromJSON(-this.days),s.float.fromJSON(-this.seconds),s.float.fromJSON(-this.microseconds)])},__pos__:function(){return this},__mul__:function(t){if(!s.PY_isInstance(t,s.float))return s.NotImplemented;t=t.toJSON();return s.PY_call(a.timedelta,[s.float.fromJSON(this.days*t),s.float.fromJSON(this.seconds*t),s.float.fromJSON(this.microseconds*t)])},__rmul__:function(t){return this.__mul__(t)},__div__:function(t){if(!s.PY_isInstance(t,s.float))return s.NotImplemented;var e=1e6*(24*this.days*3600+this.seconds)+this.microseconds;return s.PY_call(a.timedelta,[c,c,s.float.fromJSON(e/t.toJSON())])},__floordiv__:function(t){return this.__div__(t)},total_seconds:function(){return s.float.fromJSON(86400*this.days+this.seconds+this.microseconds/1e6)},__nonzero__:function(){return this.days||this.seconds||this.microseconds?s.True:s.False}}),a.datetime=s.type("datetime",null,{__init__:function(){var t,e=s.float.fromJSON(0),n=s.PY_parseArgs(arguments,["year","month","day",["hour",e],["minute",e],["second",e],["microsecond",e],["tzinfo",s.None]]);for(t in n)n.hasOwnProperty(t)&&(this[t]=i(n[t]))},__eq__:function(t){return this.year===t.year&&this.month===t.month&&this.day===t.day&&this.hour===t.hour&&this.minute===t.minute&&this.second===t.second&&this.microsecond===t.microsecond&&this.tzinfo===t.tzinfo?s.True:s.False},replace:function(){var t,e,n=s.PY_parseArgs(arguments,[["year",s.None],["month",s.None],["day",s.None],["hour",s.None],["minute",s.None],["second",s.None],["microsecond",s.None]]),r={};for(t in n)n.hasOwnProperty(t)&&(e=n[t],r[t]=e===s.None?this[t]:i(e));return s.PY_call(a.datetime,r)},start_of:function(){var t=s.PY_parseArgs(arguments,"granularity").granularity.toJSON();if("year"===t)return s.PY_call(a.datetime,[this.year,1,1]);if("quarter"===t){var e=v(this.year,this.month)[0];return s.PY_call(a.datetime,[e.year,e.month,e.day])}if("month"===t)return s.PY_call(a.datetime,[this.year,this.month,1]);if("week"===t){e=g(this.year,this.month,this.day);return s.PY_call(a.datetime,[this.year,this.month,this.day-e])}if("day"===t)return s.PY_call(a.datetime,[this.year,this.month,this.day]);if("hour"===t)return s.PY_call(a.datetime,[this.year,this.month,this.day,this.hour]);throw new Error("ValueError: "+t+" is not a supported granularity, supported  granularities are: year, quarter, month, week, day and hour.")},end_of:function(){var t=s.PY_parseArgs(arguments,"granularity").granularity.toJSON(),e=[23,59,59];if("year"===t)return s.PY_call(a.datetime,[this.year,12,31].concat(e));if("quarter"===t){var n=v(this.year,this.month)[1];return s.PY_call(a.datetime,[n.year,n.month,n.day].concat(e))}if("month"===t){var r=m(this.year,this.month);return s.PY_call(a.datetime,[this.year,this.month,r].concat(e))}if("week"===t){r=g(this.year,this.month,this.day);return s.PY_call(a.datetime,[this.year,this.month,this.day+(6-r)].concat(e))}if("day"===t)return s.PY_call(a.datetime,[this.year,this.month,this.day].concat(e));if("hour"===t)return s.PY_call(a.datetime,[this.year,this.month,this.day,this.hour,59,59]);throw new Error("ValueError: "+t+" is not a supported granularity, supported  granularities are: year, quarter, month, week, day and hour.")},add:function(){var t=s.PY_parseArgs(arguments,[["years",s.None],["months",s.None],["days",s.None],["hours",s.None],["minutes",s.None],["seconds",s.None]]);return s.PY_add(this,s.PY_call(S,{years:t.years,months:t.months,days:t.days,hours:t.hours,minutes:t.minutes,seconds:t.seconds}))},subtract:function(){var t,e=s.PY_parseArgs(arguments,[["years",s.None],["months",s.None],["days",s.None],["hours",s.None],["minutes",s.None],["seconds",s.None]]),n={};for(t in e)n[t]=e[t]===s.None?e[t]:s.float.fromJSON(-i(e[t]));return s.PY_add(this,s.PY_call(S,n))},strftime:function(){var n=this,t=s.PY_parseArgs(arguments,"format");return s.str.fromJSON(t.format.toJSON().replace(/%([A-Za-z])/g,function(t,e){switch(e){case"Y":return _.str.sprintf("%04d",n.year);case"m":return _.str.sprintf("%02d",n.month);case"d":return _.str.sprintf("%02d",n.day);case"H":return _.str.sprintf("%02d",n.hour);case"M":return _.str.sprintf("%02d",n.minute);case"S":return _.str.sprintf("%02d",n.second)}throw new Error("ValueError: No known conversion for "+t)}))},to_utc:function(){var t=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second).getTimezoneOffset(),t={minutes:s.float.fromJSON(t)},t=s.PY_call(s.extras.datetime.timedelta,[],t),t=r(this.year,this.month,this.day+t.days,this.hour,this.minute,this.second+t.seconds);return a.datetime.fromJSON(t.year,t.month,t.day,t.hour,t.minute,t.second)},now:s.classmethod.fromJSON(function(){var t=new Date;return s.PY_call(a.datetime,[t.getFullYear(),t.getMonth()+1,t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),1e3*t.getMilliseconds()])}),today:s.classmethod.fromJSON(function(){var t=s.PY_getAttr(a,"datetime");return s.PY_call(s.PY_getAttr(t,"now"))}),utcnow:s.classmethod.fromJSON(function(){var t=new Date;return s.PY_call(a.datetime,[t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),1e3*t.getUTCMilliseconds()])}),combine:s.classmethod.fromJSON(function(){var t=s.PY_parseArgs(arguments,"date time");return s.PY_call(a.datetime,[s.PY_getAttr(t.date,"year"),s.PY_getAttr(t.date,"month"),s.PY_getAttr(t.date,"day"),s.PY_getAttr(t.time,"hour"),s.PY_getAttr(t.time,"minute"),s.PY_getAttr(t.time,"second")])}),toJSON:function(){return new Date(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.microsecond/1e3)},__add__:function(t){if(!s.PY_isInstance(t,a.timedelta))return s.NotImplemented;t=r(this.year,this.month,this.day+t.days,this.hour,this.minute,this.second+t.seconds);return a.datetime.fromJSON(t.year,t.month,t.day,t.hour,t.minute,t.second)},__sub__:function(t){return s.PY_isInstance(t,a.timedelta)?s.PY_add(this,s.PY_negative(t)):s.NotImplemented},fromJSON:function(t,e,n,r,o,i){return s.PY_call(a.datetime,[t,e,n,r,o,i])}}),a.date=s.type("date",null,{__init__:function(){var t=s.PY_parseArgs(arguments,"year month day");this.year=i(t.year),this.month=i(t.month),this.day=i(t.day)},strftime:function(){var n=this,t=s.PY_parseArgs(arguments,"format");return s.str.fromJSON(t.format.toJSON().replace(/%([A-Za-z])/g,function(t,e){switch(e){case"Y":return n.year;case"m":return _.str.sprintf("%02d",n.month);case"d":return _.str.sprintf("%02d",n.day)}throw new Error("ValueError: No known conversion for "+t)}))},__eq__:function(t){return this.year===t.year&&this.month===t.month&&this.day===t.day?s.True:s.False},replace:function(){var t,e,n=s.PY_parseArgs(arguments,[["year",s.None],["month",s.None],["day",s.None]]),r={};for(t in n)n.hasOwnProperty(t)&&(e=n[t],r[t]=e===s.None?this[t]:i(e));return s.PY_call(a.date,r)},start_of:function(){var t=s.PY_parseArgs(arguments,"granularity").granularity.toJSON();if("year"===t)return s.PY_call(a.date,[this.year,1,1]);if("quarter"===t){var e=v(this.year,this.month)[0];return s.PY_call(a.date,[e.year,e.month,e.day])}if("month"===t)return s.PY_call(a.date,[this.year,this.month,1]);if("week"===t){e=g(this.year,this.month,this.day);return s.PY_call(a.date,[this.year,this.month,this.day-e])}if("day"===t)return s.PY_call(a.date,[this.year,this.month,this.day]);throw new Error("ValueError: "+t+" is not a supported granularity, supported  granularities are: year, quarter, month, week and day.")},end_of:function(){var t=s.PY_parseArgs(arguments,"granularity").granularity.toJSON();if("year"===t)return s.PY_call(a.date,[this.year,12,31]);if("quarter"===t){var e=v(this.year,this.month)[1];return s.PY_call(a.date,[e.year,e.month,e.day])}if("month"===t){var n=m(this.year,this.month);return s.PY_call(a.date,[this.year,this.month,n])}if("week"===t){n=g(this.year,this.month,this.day);return s.PY_call(a.date,[this.year,this.month,this.day+(6-n)])}if("day"===t)return s.PY_call(a.date,[this.year,this.month,this.day]);throw new Error("ValueError: "+t+" is not a supported granularity, supported  granularities are: year, quarter, month, week and day.")},add:function(){var t=s.PY_parseArgs(arguments,[["years",s.None],["months",s.None],["days",s.None]]);return s.PY_add(this,s.PY_call(S,{years:t.years,months:t.months,days:t.days}))},subtract:function(){var t,e=s.PY_parseArgs(arguments,[["years",s.None],["months",s.None],["days",s.None]]),n={};for(t in e)n[t]=e[t]===s.None?e[t]:s.float.fromJSON(-i(e[t]));return s.PY_add(this,s.PY_call(S,n))},__add__:function(t){if(!s.PY_isInstance(t,a.timedelta))return s.NotImplemented;t=r(this.year,this.month,this.day+t.days);return a.date.fromJSON(t.year,t.month,t.day)},__radd__:function(t){return this.__add__(t)},__sub__:function(t){return s.PY_isInstance(t,a.timedelta)?s.PY_add(this,s.PY_negative(t)):s.PY_isInstance(t,a.date)?s.PY_call(a.timedelta,[s.PY_subtract(s.PY_call(s.PY_getAttr(this,"toordinal")),s.PY_call(s.PY_getAttr(t,"toordinal")))]):s.NotImplemented},toordinal:function(){return s.float.fromJSON(y(this.year,this.month,this.day))},weekday:function(){return s.float.fromJSON((this.toordinal().toJSON()+6)%7)},fromJSON:function(t,e,n){return s.PY_call(a.date,[t,e,n])},today:s.classmethod.fromJSON(function(){var t=new Date;return s.PY_call(a.date,[t.getFullYear(),t.getMonth()+1,t.getDate()])})}),a.time=s.type("time",null,{__init__:function(){var t,e=s.float.fromJSON(0),n=s.PY_parseArgs(arguments,[["hour",e],["minute",e],["second",e],["microsecond",e],["tzinfo",s.None]]);for(t in n)n.hasOwnProperty(t)&&(this[t]=i(n[t]))}});var Y=s.PY_call(s.object);Y.strftime=s.PY_def.fromJSON(function(){var t=s.PY_parseArgs(arguments,"format"),e=s.PY_getAttr(a,"datetime"),e=s.PY_call(s.PY_getAttr(e,"utcnow"));return s.PY_call(s.PY_getAttr(e,"strftime"),[t.format])});var b=_.map("year month day hour minute second years months weeks days hours minutes seconds weekday leapdays yearday nlyearday".split(" "),function(t){switch(t){case"years":case"months":case"days":case"leapdays":case"weeks":case"hours":case"minutes":case"seconds":return[t,c];case"year":case"month":case"day":case"weekday":case"hour":case"minute":case"second":case"yearday":case"nlyearday":return[t,null];default:throw new Error("Unknown relativedelta argument "+t)}});b.unshift("*");var O={monthrange:function(t,e){if(e<1||12<e)throw new Error("Illegal month "+e);return[this.weekday(t,e,1),this.mdays[e]+(e==this.February&&this.isleap(t))]},weekday:function(t,e,n){n=s.PY_call(a.date,[t,e,n]);return s.PY_call(s.PY_getAttr(n,"weekday"))},isleap:function(t){return t%4==0&&(t%100!=0||t%400==0)},mdays:[0,31,28,31,30,31,30,31,31,30,31,30,31],January:1,February:2},S=s.type("relativedelta",null,{__init__:function(){this.ops=s.PY_parseArgs(arguments,b),this.ops.days=s.float.fromJSON(i(this.ops.days)+7*i(this.ops.weeks));var t=c;if(this.ops.nlyearday?t=this.ops.nlyearday:this.ops.yearday&&(t=this.ops.yearday,59<i(this.ops.yearday)&&(this.ops.leapdays=s.float.fromJS(-1))),s.PY_isTrue(t)){for(var e=[31,59,90,120,151,181,212,243,273,304,334,366],n=0;n<e.length;++n){var r=e[n];if(i(t)<=r){this.ops.month=s.float.fromJSON(n+1),this.ops.day=n?s.PY_subtract(t,s.float.fromJSON(e[n-1])):t;break}}if(n===e.length)throw new Error("Invalid year day ("+i(t)+")")}this._fix()},_fix:function(){var n,r=this,t=i(this.ops.months);11<Math.abs(t)&&l(t*(n=0<t?1:-1),12,function(t,e){r.ops.months=s.float.fromJSON(e*n),r.ops.years=s.float.fromJSON(i(r.ops.years)+t*n)}),this._has_time=0},__add__:function(t){if(!s.PY_isInstance(t,a.date)&&!s.PY_isInstance(t,a.datetime))return s.NotImplemented;var e=(i(this.ops.year)||i(t.year))+i(this.ops.years),n=i(this.ops.month)||i(t.month);if(o=i(this.ops.months)){if(Math.abs(o)<1||12<Math.abs(o))throw new Error("Can only use relative months between -12 and +12");12<(n+=o)&&(e+=1,n-=12),n<1&&(--e,n+=12)}var r=Math.min(O.monthrange(e,n)[1],i(this.ops.day)||i(t.day)),o={year:s.float.fromJSON(e),month:s.float.fromJSON(n),day:s.float.fromJSON(r)};s.PY_isInstance(t,a.datetime)&&(o.hour=s.float.fromJSON(i(this.ops.hour)||i(t.hour)),o.minute=s.float.fromJSON(i(this.ops.minute)||i(t.minute)),o.second=s.float.fromJSON(i(this.ops.second)||i(t.second)));r=i(this.ops.days);s.PY_isTrue(this.ops.leapdays)&&2<n&&O.isleap(e)&&(r+=i(this.ops.leapdays));t=s.PY_add(s.PY_call(s.PY_getAttr(t,"replace"),o),s.PY_call(a.timedelta,{days:s.float.fromJSON(r),hours:s.float.fromJSON(i(this.ops.hours)),minutes:s.float.fromJSON(i(this.ops.minutes)),seconds:s.float.fromJSON(i(this.ops.seconds))}));return this.ops.weekday&&(o=i(this.ops.weekday),r=7*(Math.abs(1)-1),r+=(7-i(s.PY_call(s.PY_getAttr(t,"weekday")))+o)%7,t=s.PY_add(t,s.PY_call(a.timedelta,{days:s.float.fromJSON(r)}))),t},__radd__:function(t){return this.__add__(t)},__rsub__:function(t){return this.__neg__().__radd__(t)},__neg__:function(){return s.PY_call(S,{years:s.PY_negative(this.ops.years),months:s.PY_negative(this.ops.months),days:s.PY_negative(this.ops.days),leapdays:this.ops.leapdays,hours:s.PY_negative(this.ops.hours),minutes:s.PY_negative(this.ops.minutes),seconds:s.PY_negative(this.ops.seconds),year:this.ops.year,month:this.ops.month,day:this.ops.day,weekday:this.ops.weekday,hour:this.ops.hour,minute:this.ops.minute,second:this.ops.second})}});s.extras={datetime:a,time:Y,relativedelta:S}}("undefined"==typeof exports?py:exports);